{"version":3,"sources":["../../src/koa/03.js"],"names":["Koa","require","app","main","ctx","request","accepts","response","type","body","data","use","listen"],"mappings":";;AAAA;AACA;AACA;AACA,IAAMA,MAAMC,QAAQ,KAAR,CAAZ;AACA,IAAMC,MAAM,IAAIF,GAAJ,EAAZ;;AAEA,IAAMG,OAAO,SAAPA,IAAO,MAAO;AAClB,MAAIC,IAAIC,OAAJ,CAAYC,OAAZ,CAAoB,KAApB,CAAJ,EAAgC;AAC9BF,QAAIG,QAAJ,CAAaC,IAAb,GAAoB,KAApB;AACAJ,QAAIG,QAAJ,CAAaE,IAAb,GAAoB,0BAApB;AACD,GAHD,MAGO,IAAIL,IAAIC,OAAJ,CAAYC,OAAZ,CAAoB,MAApB,CAAJ,EAAiC;AACtCF,QAAIG,QAAJ,CAAaC,IAAb,GAAoB,MAApB;AACAJ,QAAIG,QAAJ,CAAaE,IAAb,GAAoB,EAAEC,MAAM,aAAR,EAApB;AACD,GAHM,MAGA,IAAIN,IAAIC,OAAJ,CAAYC,OAAZ,CAAoB,MAApB,CAAJ,EAAiC;AACtCF,QAAIG,QAAJ,CAAaC,IAAb,GAAoB,MAApB;AACAJ,QAAIG,QAAJ,CAAaE,IAAb,GAAoB,sBAApB;AACD,GAHM,MAGA;AACLL,QAAIG,QAAJ,CAAaC,IAAb,GAAoB,MAApB;AACAJ,QAAIG,QAAJ,CAAaE,IAAb,GAAoB,aAApB;AACD;AACF,CAdD;;AAgBAP,IAAIS,GAAJ,CAAQR,IAAR;AACAD,IAAIU,MAAJ,CAAW,IAAX","file":"03.js","sourcesContent":["// HTTP Response的类型\r\n// Koa默认返回的类型是text/plain 如果想返回其他类型内容，可以先用 ctx.request.accepts判断\r\n// 客户端希望接收什么数据，然后使用ctx.response.type指定返回类型\r\nconst Koa = require('koa')\r\nconst app = new Koa()\r\n\r\nconst main = ctx => {\r\n  if (ctx.request.accepts('xml')) {\r\n    ctx.response.type = 'xml'\r\n    ctx.response.body = '<data>Hello World</data>'    \r\n  } else if (ctx.request.accepts('json')) {\r\n    ctx.response.type = 'json'\r\n    ctx.response.body = { data: 'Hello world' }\r\n  } else if (ctx.request.accepts('html')) {\r\n    ctx.response.type = 'html'\r\n    ctx.response.body = '<h1>Hello World</h1>'\r\n  } else {\r\n    ctx.response.type = 'text'\r\n    ctx.response.body = 'Hello World'\r\n  }\r\n}\r\n\r\napp.use(main)\r\napp.listen(3000)"]}