<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"> 
  <title>判断函数是否是作为构造器进行调用的</title> 
  <style>
  li{border:1px solid #ccc; padding:5px;}
  .pass {color: green;}
  .fail {color: red; text-decoration: line-through;}
  </style>
</head>
<body>
<ul id="results"></ul>

<script src="../../js/assert.js"></script>
<script>
function Test() {
  return this instanceof arguments.callee;
}

assert(!Test(), "We didn't instantiate, so it returns false.");
assert(new Test(), "We did instantiate, returning true.");

/**
 * 通过arguments.callee 可以得到当前执行函数的引用
 * “普通”函数的上下文是全局作用域(除非强制修改)
 * 利用instanceof操作符测试已构建对象是否构建于指定的构造器
 * 基于这些事实，函数在作为构造器进行执行的时候，表达式：
 * this instanceof arguments.callee    // true, 如果作为普通函数执行则返回false *  
 */

</script>
</body>
</html>