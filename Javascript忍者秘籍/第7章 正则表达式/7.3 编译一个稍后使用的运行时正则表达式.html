<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"> 
  <title>7.3 编译一个稍后使用的运行时正则表达式.html</title> 
  <style>
  li{border:1px solid #ccc; padding:5px;}
  .pass {color: green;}
  .fail {color: red; text-decoration: line-through;}
  </style>
</head>
<body>
<ul id="results"></ul>
<div class="samurai ninja"></div>
<div class="ninja samurai"></div>
<div></div>
<span class="samurai ninja ronin"></span>

<script src="../js/assert.js"></script>
<script>
function findClassInElements(className, type) {
  var elems = document.getElementsByTagName( type || "*" );
  var reg = new RegExp("(^|\\s)" + className + "(\\s|$)");

  var results = [];

  for ( var i=0, l = elems.length; i<l; i++ ) {
    if(reg.test(elems[i].className)) {
      results.push(elems[i])
    }
  }
  return results;
}

assert(findClassInElements("ninja", "div").length == 2, "The right amout of div ninjas was found.")
assert(findClassInElements("ninja", "span").length == 1, "The right amount of span ninjas was found.")
assert(findClassInElements("ninja").length == 3, "The right amount of ninjas was found. ")
</script>
</body>
</html>