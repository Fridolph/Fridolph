# 观察者模式

又叫发布-订阅模式，它定义对象间的一种一对多的依赖关系。当一个对象的状态发生改变时，所有依赖于它的对象都将得到通知。在JS开发中，我们一般用事件模型来替代传统的观察者模式。

## 现实中的观察者模式

买房

售楼电话 。。。

通知

## 观察者模式的作用

优点：

1. 购房者不用天天咨询，在合适的时间，售楼处作为发布者，通知所有消息订阅者。

2. 买房人与售楼处不用强行耦合了，当有新的购房者出现时，只需要登记联系方式即可，而售房者也不用关心订阅者的各种信息，只要有新消息，立马通知即可。

第一点，说明观察者模式可以广泛应用于异步编程中，这是一种替代传递回调的方案。比如，我们可以在订阅Ajax请求的error、succ等事件。或者如果想在动画的每一帧完成之后做一些事情，那我们可以订阅一个事件，然后在动画的每一帧完成之后发布这个事件。异步编程使用观察者模式，我们就无需过多关注对象在异步运行期间的内部状态，而只需要订阅感兴趣的事件发生点。

第二点，说明观察者模式可以取代对象之间硬编码的通知机制，一个对象不用再显示地调用另外一个对象的某个接口。观察者模式让两个对象松耦合地联系在一起，虽然不清楚彼此的细节，但这不影响它们之间的相互通信。当有新的订阅者出现时，发布者的代码不需要任何修改；同样发布者需要改变时，也不会影响到之前的订阅者。只要之前约定的事件名没有变化，就可以自由地改变它们。