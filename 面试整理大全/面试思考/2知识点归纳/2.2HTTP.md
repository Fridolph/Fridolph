## HTTP协议类

* HTTP协议的主要特点
* HTTP报文的组成部分
* HTTP方法
* POST和GET的区别
* HTTP状态码
* 什么是持久连接
* 什么是管线化

### HTTP协议的主要特点

* 简单快速 一个URI对应一个资源
* 灵活    通过一个HTTP协议，完成不同数据类型的传输
* 无连接  连接一次就会断掉
* 无状态  客户端服务端是两种身份，不会主动记录，所有无法区分每次连接者身份

### HTTP报文的组成部分

请求报文： 请求行 请求头 空行 请求体
请求行： HTTP方法 请求地址 HTTP协议 HTTP版本
请求头： kv键值对，告诉服务端所要的内容
空行：告诉服务端后面的内容是请求体了

响应报文： 状态行 响应头 空行 响应体
响应行：协议 版本 状态码 

### HTTP方法

GET 获取资源
POST 传输资源
PUT 更新资源
DELETE 删除资源
HEAD 获得报文首部

### POST和GET方法的区别

* GET在浏览器回退时无副作用，而POST会再次提交请求
* GET产生的URL地址可以被收藏，而POST不可以
* GET请求会被浏览器主动缓存，而POST不会，除非手动设置
* GET请求只能进行url编码，POST支持多种编码方式
* GET请求参数会被完整保留在浏览器历史记录里，而POST中的参数不会被保留
* GET请求在URL中传送的参数是有长度限制的，而POST没有限制
* 对参数的数据类型，GET只接受ASCII字符，而POST没有限制
* GET比POST更不安全，因为参数直接暴露在URL上，所以不能用来传递敏感信息
* GET参数通过URL传递，POST放在Request body中

### 状态码

1xx 指示信息，表示请求已接收，继续处理
2xx 成功，表示请求已被成功接收
  200 OK 客户端请求成功
  206 Partial Content 客户发送了一个带有Range头的GET请求，服务器完成了它
3xx 重定向，要完成请求必须进行更进一步的操作
  301 Moved Permanently 永久重定向，所请求的页面已转移到新的URL
  302 Found 临时重定向，所请求的页面已经临时转移到新的URL
  303 See Other 明确表示客户端当采用GET方法重定向到另一个url上
    当301、302、303响应状态码返回时，浏览器会把POST改成GET，并删除请求报文内的主体，之后请求会自动再次发送
  304 Not Modified 客户端有缓存，发出一个条件性请求，服务器告诉客户端，从缓存中读取
  307 Temporary Redirect 临时重定向，遵照标准不会从POST变为GET。
4xx 客户端错误，请求有语法错误或请求无法实现使用
  400 Bad Request 坏请求，客户端请求有语法错误，不能被服务器理解
  401 Unanthorized 请求未经授权，这个状态码必须和WWW-Authenticate报头域一起
  403 Forbidden 对被请求页面的访问被禁止
  404 Not Found 请求资源不存在
5xx 服务器错误，服务器未能实现合法的请求
  500 Internal Server Error 服务器发生不可预期的错误，原来缓存的文档还可继续使用
  503 Server Unavailable 请求为完成，服务器临时过载或宕机，一段时间后可能恢复正常

### 持久连接

HTTP协议采用 请求-应答 模式，当使用普通模式，即非Keep-Alive模式时，每个 请求/应答 客户和服务器都要新建一个连接，完成之后立即断开连接（HTTP协议为无连接的协议）

（HTTP1.1版本以上）当使用 Keep-Alive模式（又称持久连接、连接重用）时，Keep-Alive功能使客户端到服务端的连接持续有效，当出现对服务器的后续请求时，Keep-Alive功能避免了建立或重新建立连接

### 管线化

在使用持久连接的情况下，某个连接上消息的传递类似于：

请求1 -> 响应1 -> 请求2 -> 响应2 -> 请求3 -> 响应3

某个连接上的消息变成了类似这样：

请求1 -> 请求2 -> 请求3 -> 响应1 -> 响应2 -> 响应3

---

* 管线化机制通过持久连接完成，HTTP/1.1支持此技术
* 只有GET和HEAD请求可以进行管线化，而POST则有所限制
* 初次创建连接时不应启动管线机制，因为服务器不一定支持HTTP/1.1版本的协议
* 管线化不会影响响应到来的顺序，如上例所示，响应返回的顺序并未改变
* HTTP/1.1要求服务端支持管线化，但并不要求服务端也对响应进行管线化处理，只是要求对于管线化的请求不失败即可
* 由于上面提到的服务端问题，开启管线化很可能并不会带来大幅度的性能提升，而且很多服务端和代理程序对管线化的支持并不好。如Chrome、Firefox等并未默认开启管线化支持

